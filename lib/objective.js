// Generated by CoffeeScript 1.4.0
var Config, Injector, Objective, PluginLoader, Runtime;

Config = require('nezcore').config;

Injector = require('nezcore').injector;

Runtime = require('./exec/nez').exec;

PluginLoader = require('./plugin_loader');

module.exports = Objective = {
  load: function(label, config, injectable) {
    var defaults, key, stack;
    defaults = Config.get('objective');
    defaults.label = label;
    defaults.injectable = injectable;
    for (key in config) {
      defaults[key] = config[key];
    }
    PluginLoader.load(defaults);
    stack = require('./nez').link();
    stack.name = label;
    if (typeof injectable === 'function') {
      Injector.inject([stack.stacker], injectable);
    }
    return Runtime(label, defaults);
  }
};
