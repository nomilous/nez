// Generated by CoffeeScript 1.6.3
var Notice, collection, factory;

Notice = require('notice');

collection = {};

factory = function(context, notice, callback) {
  return Notice.listen('realizers', context, function(error) {
    if (error != null) {
      return callback(error);
    }
    return callback(null, {
      get: function(opts, callback) {
        opts || (opts = {});
        if (opts.id == null) {
          throw new Error('realizers.get(opts, callback) requires opts.id as the realizer id');
        }
        if (collection[opts.id] == null) {
          if (opts.script == null) {
            return callback(new Error('missing realizer'));
          }
          return context.tools.spawn(opts, callback);
        }
      }
    });
  });
};

module.exports = factory;
