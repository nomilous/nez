// Generated by CoffeeScript 1.6.3
var allowSpawn, collection, factory;

collection = {};

allowSpawn = false;

factory = function(context, notice) {
  var realizers;
  realizers = {
    get: function(opts, callback) {
      opts || (opts = {});
      if (opts.id == null) {
        throw new Error('realizers.get(opts, callback) opts.id as the realizer id');
      }
      if (collection[opts.id] == null) {
        if (!allowSpawn) {
          return callback(new Error('missing realizer'));
        }
        return realizers.spawn(opts);
      }
    }
  };
  Object.defineProperty(realizers, 'allowSpawn', {
    set: function(value) {
      if (typeof value === 'boolean') {
        return allowSpawn = value;
      }
    }
  });
  return realizers;
};

module.exports = factory;
