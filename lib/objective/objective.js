// Generated by CoffeeScript 1.6.3
var async, eo, notice, tools;

notice = require('notice');

async = require('also').inject.async;

tools = require('../tools');

eo = require('eo');

module.exports = function(title, opts, objectiveFn) {
  var context, objective;
  context = eo.validate.apply(this, arguments);
  objective = async({
    beforeAll: function(done, inject) {
      context.tools = tools;
      inject.first[0] = notice.listen('realizers', context, function(error) {
        return done(error);
      });
      return inject.first[1] = notice.create('objective', context.messenger || eo.messenger);
    },
    error: context.error || (console.log('WARNING', 'objective without error handler'), function(error) {
      return console.log('ERROR', error);
    })
  }, eo);
  return objective(objectiveFn);
};
